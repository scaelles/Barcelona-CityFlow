<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8" />
	<title>City Flow</title>

	<script type="text/javascript">
			//Funcio query Instagram
			var JSONstring;
			function queryInsta(){
				if (window.XMLHttpRequest){
					// code for IE7+, Firefox, Chrome, Opera, Safari
					xmlhttp=new XMLHttpRequest();
				}else{// code for IE6, IE5
					xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
				}
				
				xmlhttp.onreadystatechange=function(){
					if (xmlhttp.readyState==4 && xmlhttp.status==200){
						JSONstring=xmlhttp.responseText;
					}
				}
				xmlhttp.open("GET","getInstaData.php",false);
				xmlhttp.send();
			}
			
			function initialize() {
      			queryInsta();
				
				var arrayJSON = JSON.parse(JSONstring);
				//document.write(JSON.stringify(arrayJSON));
				//alert(arrayJSON[0].boundsDistrict);
				//Els camps disponibles estan en comentari.
				document.write('<br><br>');
				for(var i=0; i<arrayJSON.length; i++){
					var district = arrayJSON[i];
					//district.nameDistrict
					//district.boundsDistrict
					
					//TODO: Dibuixar poligon si estas en nivell de zoom que toca
					//TODO: Fer infoWindow corresponent si estàs al nivell de zoom
					//TODO: Afegir listener si cal
					
					for(var j=0; j<district.neighbs.length; j++){
						var neighb = district.neighbs[j];
						//neighb.name
						//neighb.bounds
						//neighb.numLastPosts
						
						//TODO: Dibuixar poligon si estas en nivell de zoom que toca
						//TODO: Fer infoWindow corresponent si estàs al nivell de zoom
						//TODO: Afegir listener

						for(var k=0; k<neighb.posts.length; k++){
							var post = neighb.posts[k];
							//post.tags
							//post.im_link
							//post.lat
							//post.long
							
							//TODO: Afegir post al heat map
						}
					}		
				}
			}

		</script>
	</head>
	<body onload="initialize()">Hola</body>
</html>